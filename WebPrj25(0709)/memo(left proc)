create or replace PACKAGE PKG_SCORES AS 

  PROCEDURE PROC_SEL_GRPCOM(
  IN_GRP_NAME IN VARCHAR2,
  O_CUR OUT SYS_REFCURSOR
  )
  ;
  
  PROCEDURE PROC_INS_GRPCOM(
    IN_GRP_NAME IN VARCHAR2
  )
  ;
  
  PROCEDURE PROC_UP_GRPCOM(
   IN_GRP_ID IN VARCHAR2,
   IN_GRP_NAME IN VARCHAR2
  )
  ;
  
  PROCEDURE PROC_DEL_GRPCOM(
   IN_GRP_ID IN VARCHAR2
  );
  
  
  
  -================================================================
  
  CREATE OR REPLACE
PACKAGE BODY PKG_SCORES AS

    --1.GRPCOM을 검색
  PROCEDURE PROC_SEL_GRPCOM(
  IN_GRP_NAME IN VARCHAR2,
  O_CUR OUT SYS_REFCURSOR
  )
   AS
  BEGIN
    
    OPEN O_CUR FOR
    SELECT GRP_ID, GRP_NAME FROM GRPCOMMONS_TBL
    WHERE GRP_NAME LIKE '%' || IN_GRP_NAME ||  '%'   --검색이니깐 LIKE를 써준다.
    ;
    
    
  END PROC_SEL_GRPCOM;
  
   --2.INSERT
    PROCEDURE PROC_INS_GRPCOM(
    IN_GRP_NAME IN VARCHAR2
  )
  AS
    V_GRP_ID CHAR(6);
  
  BEGIN
    V_GRP_ID  := FUNC_GET_GRPID(); --함수객체의 FUNC_GET_GRPID를 가져온다.
    
    INSERT INTO GRPCOMMONS_TBL(GRP_ID, GRP_NAME)
    VALUES(V_GRP_ID, IN_GRP_NAME); --새 함수를 만든다.왼쪽에 함수객체를 만들면 됌
    
    
    
  END
  PROC_INS_GRPCOM;
  
  --3.업데이트
   PROCEDURE PROC_UP_GRPCOM(
   IN_GRP_ID IN VARCHAR2,
   IN_GRP_NAME IN VARCHAR2
  )
  AS
  
  BEGIN
   UPDATE GRPCOMMONS_TBL
   SET GRP_NAME = IN_GRP_NAME
   WHERE GRP_ID = IN_GRP_ID
  ;
  
  END
  PROC_UP_GRPCOM
  ;
  
  --4.삭제
  
  PROCEDURE PROC_DEL_GRPCOM(
   IN_GRP_ID IN VARCHAR2
  )
  
  AS
  
  BEGIN
       DELETE FROM GRPCOMMONS_TBL WHERE GRP_ID = IN_GRP_ID;
       
--       UPDATE GRPCOMMONS_TBL SET GRP_ID = TRIM(TO_CHAR(TO_NUMBER(SUBSTR(GRP_ID,4))-1,'000')) WHERE GRP_ID > IN_GRP_ID  



       
       
  END
  PROC_DEL_GRPCOM
  ;